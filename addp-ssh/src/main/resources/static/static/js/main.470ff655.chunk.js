(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){},144:function(e,t,a){e.exports=a(304)},182:function(e,t,a){},304:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(9),l=a.n(r),s=a(36),c=a(37),i=a(39),u=a(38),m=a(40),d=(a(96),a(91)),p=(a(182),a(104),a(122)),f=a(310),g=a(307),h=(a(105),a(123)),b=a.n(h),S=a(306),w=a(305),k=a(308),v=a(15),y=a(309),E=a(17),x=S.a.Item,O=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).handleSubmit=function(e){console.log("props",a.props),e.preventDefault(),console.log("data",a.props.form),a.props.form.validateFields(function(e,t){e||a.props.onClick(t)})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return o.a.createElement(S.a,{onSubmit:this.handleSubmit,className:"login-form"},o.a.createElement(x,null,e("ip",{rules:[{required:!0,message:"ip\u4e0d\u80fd\u4e3a\u7a7a"}]})(o.a.createElement(k.a,{prefix:o.a.createElement(v.a,{type:"global",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"ip"}))),o.a.createElement(x,null,e("username",{rules:[{required:!0,message:"username\u4e0d\u80fd\u4e3a\u7a7a"}]})(o.a.createElement(k.a,{prefix:o.a.createElement(v.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"username"}))),o.a.createElement(x,null,e("password",{rules:[{required:!0,message:"password\u4e0d\u80fd\u4e3a\u7a7a"}]})(o.a.createElement(k.a,{prefix:o.a.createElement(v.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"password"}))),o.a.createElement(x,null,e("remember",{valuePropName:"checked",initialValue:!0})(o.a.createElement(y.a,null,"Remember me")),o.a.createElement(E.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u8fde\u63a5")))}}]),t}(o.a.Component),j=S.a.create()(O);S.a.Item;d.Terminal.applyAddon(p);var I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.createXterm()},a.createWebsocket=function(){var e=new WebSocket("ws://ssh.xx11.top/ws/terminals/");e.onopen=function(e){console.log("websocket open",e),a.state.xterm.clear()},e.onmessage=function(e){a.state.xterm.write(e.data),null==a.state.loginStatus&&(f.a.success("SSH \u8fde\u63a5\u6210\u529f",1),a.setState({socket:a.state.socket,xterm:a.state.xterm,loginStatus:!0,loading:!1}))},e.onclose=function(e){console.log("websocket onclose",e),null==a.state.loginStatus?(f.a.error("SSH \u8fde\u63a5\u5931\u8d25\uff01\uff01\uff01",5),a.setState({socket:a.state.socket,xterm:a.state.xterm,loginStatus:!1,loading:!1,modalStatus:!0})):g.a.warning({title:"SSH\u8fde\u63a5\u65ad\u5f00",content:"\u8fde\u63a5\u5df2\u7ecf\u5173\u95ed\uff0c\u8bf7\u91cd\u65b0\u8fde\u63a5",onOk:function(){a.setState({loginStatus:null,loading:!1,modalStatus:!0})}})},e.onerror=function(e){f.a.error("SSH shell \u5931\u8d25",2)},a.setState({socket:e})},a.createXterm=function(){var e=new d.Terminal({rows:50});e._initialized=!0,e.open(document.getElementById("shell-container")),e.on("data",a.xtermData),a.setState({xterm:e})},a.xtermData=function(e){console.log("state",a.state),a.state.socket.send(e.toString())},a.loginClick=function(e){a.createWebsocket(),b.a.create({url:"/ssh/shell/create",method:"POST",data:e,fit:function(e){return{success:!0,content:e}},process:function(e){return e}})().then(function(e){console.log("result",e),a.state.socket.send('{"key":"connect","id":"'.concat(e,'"}'))}).catch(function(e){console.log("error",e);a.setState({loading:!1})});a.setState({modalStatus:!1,loading:!0})},a.ipInput=function(e){a.ip=e.target.value},a.usernameInput=function(e){a.username=e.target.value},a.passwordInput=function(e){a.password=e.target.value},a.state={socket:null,xterm:null,loginStatus:null,modalStatus:!0,loading:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"write",value:function(e){this.state.xterm.write(e)}},{key:"render",value:function(){return o.a.createElement("div",{className:"shell-div",style:{display:this.state.loading?"block":"none"}},o.a.createElement(g.a,{title:"WEB SSH Login",centered:!0,visible:this.state.modalStatus,width:400,footer:null},o.a.createElement(j,{onClick:this.loginClick.bind(this)})),o.a.createElement(w.a,{tip:"SSH \u8fde\u63a5\u4e2d\xb7\xb7\xb7",spinning:this.state.loading,size:"large",style:{position:"absolute",zIndex:"99",top:"45%",left:"45%",width:"10%",height:"10%"}}))}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).websocket=o.a.createRef(),a.shellBox=o.a.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(I,{ref:this.shellBox}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},96:function(e,t,a){}},[[144,2,1]]]);
//# sourceMappingURL=main.470ff655.chunk.js.map